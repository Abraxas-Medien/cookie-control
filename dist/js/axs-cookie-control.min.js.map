{"version":3,"sources":["axs-cookie-control.js"],"names":["$","widget","options","position","cookie","name","expires","path","autoAccept","analyticsOnly","messages","buttons","accept","decline","normal","analytics","generic","_create","this","data","_dom","_initDOM","_on","element","cookiecontrolchangedposition","cookiecontrolchangedcookie","cookiecontrolchangedautoaccept","cookiecontrolchangedanalyticsonly","cookiecontrolchangedmessages","cookiecontrolchangedbuttons","_setOptions","addClass","wrapper","textWrapper","acceptButton","declineButton","append","force","each","key","value","beforeValue","exists","hasOwnProperty","undefined","_equals","_setOption","_trigger","before","after","isAutoAcceptEnabled","scroll","click","_updateText","textArray","text","empty","_updateButtons","toggle","_onScroll","setStatus","_onClick","_autoAcceptChanged","window","_scrollListenerEnabled","_off","document","body","_clickListenerEnabled","_analyticsOnlyChanged","_messagesChanged","_buttonsChanged","_positionChanged","event","removeClass","_cookieChanged","values","beforeStatus","getStatus","removeCookie","status","_updateWidgetStatus","_setStatusIfChanged","currStatus","_setStatusImpl","statusBefore","cookieName","oldStatus","x","y","Object","constructor","p"],"mappings":"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","file":"axs-cookie-control.min.js","sourcesContent":["/**\n * Created by tello on 10.08.15.\n */\n$.widget( \"axs.cookieControl\", {\n\toptions: {\n\t\tposition: \"top\", //Valid values: top and bottom\n\t\tcookie: {\n\t\t\tname: 'axs-cookie-control',\n\t\t\texpires: 30,\n\t\t\tpath: '/'\n\t\t},\n\t\tautoAccept: false,\n\t\tanalyticsOnly: false, //Generic or analytics mode\n\t\tmessages: {\n\t\t\tbuttons: {\n\t\t\t\taccept: \"Accept Cookies\",\n\t\t\t\tdecline: \"Decline Cookies\"\n\t\t\t},\n\t\t\tnormal: {\n\t\t\t\tanalytics: 'We use cookies, just to track visits to our website, we store no personal details.',\n\t\t\t\t\"generic\": 'We use cookies on this website, you can read about them <a href=\"http://en.wikipedia.org/wiki/HTTP_cookie\">here</a>.'\n\t\t\t},\n\t\t\tautoAccept: {\n\t\t\t\tanalytics: 'We use cookies, just to track visits to our website, we store no personal details. Using the website you consent the use of cookies.',\n\t\t\t\t\"generic\": 'We use cookies on this website, you can read about them <a href=\"http://en.wikipedia.org/wiki/HTTP_cookie\">here</a>. Using the website you consent the use of cookies.'\n\t\t\t}\n\t\t},\n\t\tbuttons: {\n\t\t\taccept: true,\n\t\t\tdecline: true\n\t\t}\n\t},\n\t_create: function(){\n\t\tthis.data = {};\n\n\t\tthis._dom = this._initDOM();\n\n\t\t//setup other listeners\n\t\tthis._on(\n\t\t\tthis.element,\n\t\t\t{\n\t\t\t\t'cookiecontrolchangedposition': '_positionChanged',\n\t\t\t\t'cookiecontrolchangedcookie': '_cookieChanged',\n\t\t\t\t'cookiecontrolchangedautoaccept': '_autoAcceptChanged',\n\t\t\t\t'cookiecontrolchangedanalyticsonly': '_analyticsOnlyChanged',\n\t\t\t\t'cookiecontrolchangedmessages': '_messagesChanged',\n\t\t\t\t'cookiecontrolchangedbuttons': '_buttonsChanged'\n\t\t\t}\n\t\t);\n\n\t\t//Set initial settings\n\t\tthis._setOptions(this.options, true);\n\t},\n\t_initDOM: function(){\n\t\tthis.element.addClass('axs-cookie-control');\n\n\t\t//Set the content\n\t\tvar wrapper = $('<div class=\"axs-cookie-control-wrapper\"></div>');\n\t\tvar textWrapper = $('<div class=\"axs-cookie-control-text-wrapper\"></div>');\n\n\t\tvar acceptButton = $('<button type=\"button\" class=\"axs-cookie-control-accept-button\"></button>');\n\t\tvar declineButton = $('<button type=\"button\" class=\"axs-cookie-control-decline-button\"></button>');\n\t\tvar buttons = $('<div class=\"axs-cookie-control-buttons\"></div>');\n\t\tbuttons.append(declineButton, acceptButton);\n\n\t\twrapper.append(textWrapper, buttons);\n\t\tthis.element.append(wrapper);\n\n\t\treturn {\n\t\t\twrapper: wrapper,\n\t\t\ttextWrapper: textWrapper,\n\t\t\tbuttons: buttons,\n\t\t\tacceptButton: acceptButton,\n\t\t\tdeclineButton: declineButton\n\t\t};\n\t},\n\t_setOptions: function( options, force) {\n\t\tforce = (force === true);\n\n\t\tvar widget = this;\n\n\t\t$.each( options, function( key, value ) {\n\t\t\tvar exists = widget.options.hasOwnProperty(key);\n\t\t\tvar beforeValue;\n\t\t\tif (exists){\n\t\t\t\tbeforeValue = widget.options[key];\n\t\t\t} else {\n\t\t\t\tbeforeValue = undefined;\n\t\t\t}\n\n\t\t\tif (force || !widget._equals(beforeValue, value)){\n\t\t\t\twidget._setOption( key, value );\n\n\t\t\t\twidget._trigger( \"changed\" + key, null, {\n\t\t\t\t\tbefore: beforeValue,\n\t\t\t\t\tafter: value\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\tisAutoAcceptEnabled: function(){\n\t\treturn this.options.autoAccept === true || this.options.autoAccept.scroll === true || this.options.autoAccept.click === true;\n\t},\n\t_updateText: function(){\n\t\tvar textArray = undefined;\n\t\tif (this.isAutoAcceptEnabled()) {\n\t\t\ttextArray = this.options.messages.autoAccept;\n\t\t} else {\n\t\t\ttextArray = this.options.messages.normal;\n\t\t}\n\n\t\tvar text = undefined;\n\t\tif (this.options.analyticsOnly) {\n\t\t\ttext = textArray.analytics;\n\t\t} else {\n\t\t\ttext = textArray.generic;\n\t\t}\n\n\t\tthis._dom.textWrapper.empty();\n\t\tthis._dom.textWrapper.append(text);\n\t},\n\t_updateButtons: function(){\n\t\tvar acceptButton = this._dom.acceptButton;\n\t\tacceptButton.empty();\n\t\tacceptButton.append(this.options.messages.buttons.accept);\n\t\tacceptButton.toggle(this.options.buttons.accept);\n\n\t\tvar declineButton = this._dom.declineButton;\n\t\tdeclineButton.empty();\n\t\tdeclineButton.append(this.options.messages.buttons.decline);\n\t\tdeclineButton.toggle(this.options.buttons.decline);\n\t},\n\t_onScroll: function(){\n\t\tthis.setStatus(true);\n\t},\n\t_onClick: function(){\n\t\tthis.setStatus(true);\n\t},\n\t_autoAcceptChanged: function(){\n\t\tif (this.isAutoAcceptEnabled()) {\n\t\t\tif (this.options.autoAccept === true || this.options.autoAccept.scroll) {\n\t\t\t\tthis._on(\n\t\t\t\t\twindow,\n\t\t\t\t\t{\n\t\t\t\t\t\t\"scroll\": this._onScroll\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tthis._scrollListenerEnabled = true;\n\t\t\t} else {\n\t\t\t\tif (this._scrollListenerEnabled) {\n\t\t\t\t\tthis._off(window, 'scroll', this._onScroll);\n\t\t\t\t}\n\t\t\t\tthis._scrollListenerEnabled = false;\n\t\t\t}\n\n\t\t\tif (this.options.autoAccept === true || this.options.autoAccept.click) {\n\t\t\t\tthis._on(\n\t\t\t\t\tdocument.body,\n\t\t\t\t\t{\n\t\t\t\t\t\t\"click\": this._onClick\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tthis._clickListenerEnabled = true;\n\t\t\t} else {\n\t\t\t\tif (this._clickListenerEnabled) {\n\t\t\t\t\tthis._off(document.body, 'click', this._onClick);\n\t\t\t\t}\n\t\t\t\tthis._clickListenerEnabled = false;\n\t\t\t}\n\t\t}\n\n\t\tthis._updateText();\n\t},\n\t_analyticsOnlyChanged: function(){\n\t\tthis._updateText();\n\t},\n\t_messagesChanged: function(){\n\t\tthis._updateButtons();\n\t\tthis._updateText();\n\t},\n\t_buttonsChanged: function(){\n\t\tthis._updateButtons();\n\t},\n\t_positionChanged: function(event, data){\n\t\tif (data.after == \"top\") {\n\t\t\tthis.element.removeClass(\"bottom\");\n\t\t} else {\n\t\t\tthis.element.addClass(\"bottom\");\n\t\t}\n\t},\n\t_cookieChanged: function(event, values){\n\t\tvar beforeStatus = this.getStatus(values.before.name);\n\t\t$.removeCookie(values.before.name, {path: values.before.path});\n\n\t\tvar status = this.getStatus();\n\t\tthis._updateWidgetStatus(status, beforeStatus);\n\t},\n\t_setStatusIfChanged: function(status){\n\t\tvar currStatus = this.getStatus();\n\t\tif (status !== currStatus) {\n\t\t\tthis.setStatus(status);\n\t\t}\n\t},\n\t_setStatusImpl: function(status){\n\t\tif (status === undefined) {\n\t\t\t$.removeCookie(this.options.cookie.name, {\n\t\t\t\tpath: this.options.cookie.path\n\t\t\t});\n\t\t} else {\n\t\t\t$.cookie(this.options.cookie.name, status, {\n\t\t\t\texpires: this.options.cookie.expires,\n\t\t\t\tpath: this.options.cookie.path\n\t\t\t});\n\t\t}\n\t},\n\tsetStatus: function(status){\n\t\tif(status === null) {\n\t\t\tstatus = undefined; //Options don't want to pass undefined status\n\t\t}\n\n\t\tvar statusBefore = this.getStatus();\n\t\tthis._setStatusImpl(status);\n\t\tif (statusBefore != status) {\n\t\t\tthis._updateWidgetStatus(status, statusBefore);\n\t\t}\n\t},\n\tgetStatus: function(cookieName){\n\t\tif (cookieName === undefined) {\n\t\t\tcookieName = this.options.cookie.name;\n\t\t}\n\n\t\tvar status = $.cookie(cookieName);\n\n\t\tif (status === 'true') {\n\t\t\treturn true;\n\t\t} else if(status === 'false') {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn status;\n\t\t}\n\t},\n\t_updateWidgetStatus: function(status, oldStatus){\n\n\t\tif(status === oldStatus) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (status == undefined) {\n\t\t\tthis.element.removeClass(\"hidden\");\n\t\t\tthis._trigger(\n\t\t\t\t\"changedstatus\",\n\t\t\t\tnull,\n\t\t\t\t{\n\t\t\t\t\tbefore: oldStatus,\n\t\t\t\t\tafter: status\n\t\t\t\t}\n\t\t\t);\n\t\t} else {\n\t\t\tthis.element.addClass(\"hidden\");\n\n\t\t\tif (status == true) {\n\t\t\t\tthis._trigger(\n\t\t\t\t\t\"changedstatus\",\n\t\t\t\t\tnull,\n\t\t\t\t\t{\n\t\t\t\t\t\tbefore: oldStatus,\n\t\t\t\t\t\tafter: status\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis._trigger(\n\t\t\t\t\t\"changedstatus\",\n\t\t\t\t\tnull,\n\t\t\t\t\t{\n\t\t\t\t\t\tbefore: oldStatus,\n\t\t\t\t\t\tafter: status\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t},\n\t_equals: function(x, y){\n\t\t//Copied from here.... http://stackoverflow.com/questions/1068834/object-comparison-in-javascript\n\t\tif ( x === y ) return true;\n\t\t// if both x and y are null or undefined and exactly the same\n\n\t\tif ( ! ( x instanceof Object ) || ! ( y instanceof Object ) ) return false;\n\t\t// if they are not strictly equal, they both need to be Objects\n\n\t\tif ( x.constructor !== y.constructor ) return false;\n\t\t// they must have the exact same prototype chain, the closest we can do is\n\t\t// test there constructor.\n\n\t\tfor ( var p in x ) {\n\t\t\tif ( ! x.hasOwnProperty( p ) ) continue;\n\t\t\t// other properties were tested using x.constructor === y.constructor\n\n\t\t\tif ( ! y.hasOwnProperty( p ) ) return false;\n\t\t\t// allows to compare x[ p ] and y[ p ] when set to undefined\n\n\t\t\tif ( x[ p ] === y[ p ] ) continue;\n\t\t\t// if they have the same strict value or identity then they are equal\n\n\t\t\tif ( typeof( x[ p ] ) !== \"object\" ) return false;\n\t\t\t// Numbers, Strings, Functions, Booleans must be strictly equal\n\n\t\t\tif ( ! this._equals( x[ p ],  y[ p ] ) ) return false;\n\t\t\t// Objects and Arrays must be tested recursively\n\t\t}\n\n\t\tfor ( p in y ) {\n\t\t\tif ( y.hasOwnProperty( p ) && ! x.hasOwnProperty( p ) ) return false;\n\t\t\t// allows x[ p ] to be set to undefined\n\t\t}\n\t\treturn true;\n\t}\n});"],"sourceRoot":"/source/"}