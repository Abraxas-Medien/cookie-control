{"version":3,"sources":["axs-cookie-control.js"],"names":["$","widget","options","position","cookie","name","expires","path","autoAccept","analyticsOnly","messages","buttons","accept","decline","normal","analytics","generic","_create","this","_creating","data","_dom","_initDOM","_on","element","cookiecontrolchangedposition","cookiecontrolchangedcookie","cookiecontrolchangedautoaccept","cookiecontrolchangedanalyticsonly","cookiecontrolchangedmessages","cookiecontrolchangedbuttons","_setOptions","addClass","wrapper","textWrapper","acceptButton","declineButton","append","document","body","on","event","_onClick","apply","window","_onScroll","force","each","key","value","beforeValue","exists","hasOwnProperty","undefined","_equals","_setOption","_trigger","before","after","creating","isAutoAcceptEnabled","scroll","click","_updateText","textArray","text","empty","_updateButtons","toggle","getStatus","setStatus","_autoAcceptChanged","_analyticsOnlyChanged","_messagesChanged","_buttonsChanged","_positionChanged","removeClass","_cookieChanged","values","beforeStatus","removeCookie","_setStatusIfChanged","status","currStatus","_setStatusImpl","statusBefore","_updateWidgetStatus","cookieName","oldStatus","x","y","Object","constructor","p","_destroy"],"mappings":"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","file":"axs-cookie-control.min.js","sourcesContent":["/**\n * Created by tello on 10.08.15.\n */\n$.widget( \"axs.cookieControl\", {\n\toptions: {\n\t\tposition: \"top\", //Valid values: top and bottom\n\t\tcookie: {\n\t\t\tname: 'axs-cookie-control',\n\t\t\texpires: 30,\n\t\t\tpath: '/'\n\t\t},\n\t\tautoAccept: false,\n\t\tanalyticsOnly: false, //Generic or analytics mode\n\t\tmessages: {\n\t\t\tbuttons: {\n\t\t\t\taccept: \"Accept Cookies\",\n\t\t\t\tdecline: \"Decline Cookies\"\n\t\t\t},\n\t\t\tnormal: {\n\t\t\t\tanalytics: 'We use cookies, just to track visits to our website, we store no personal details.',\n\t\t\t\t\"generic\": 'We use cookies on this website, you can read about them <a href=\"http://en.wikipedia.org/wiki/HTTP_cookie\">here</a>.'\n\t\t\t},\n\t\t\tautoAccept: {\n\t\t\t\tanalytics: 'We use cookies, just to track visits to our website, we store no personal details. Using the website you consent the use of cookies.',\n\t\t\t\t\"generic\": 'We use cookies on this website, you can read about them <a href=\"http://en.wikipedia.org/wiki/HTTP_cookie\">here</a>. Using the website you consent the use of cookies.'\n\t\t\t}\n\t\t},\n\t\tbuttons: {\n\t\t\taccept: true,\n\t\t\tdecline: true\n\t\t}\n\t},\n\t_create: function(){\n\t\tthis._creating = true;\n\n\t\tthis.data = {};\n\n\t\tthis._dom = this._initDOM();\n\n\t\t//setup other listeners\n\t\tthis._on(\n\t\t\tthis.element,\n\t\t\t{\n\t\t\t\t'cookiecontrolchangedposition': '_positionChanged',\n\t\t\t\t'cookiecontrolchangedcookie': '_cookieChanged',\n\t\t\t\t'cookiecontrolchangedautoaccept': '_autoAcceptChanged',\n\t\t\t\t'cookiecontrolchangedanalyticsonly': '_analyticsOnlyChanged',\n\t\t\t\t'cookiecontrolchangedmessages': '_messagesChanged',\n\t\t\t\t'cookiecontrolchangedbuttons': '_buttonsChanged'\n\t\t\t}\n\t\t);\n\n\t\t//Set initial settings\n\t\tthis._setOptions(this.options, true);\n\t\tthis._creating = false;\n\t},\n\t_initDOM: function(){\n\t\tthis.element.addClass('axs-cookie-control');\n\n\t\t//Set the content\n\t\tvar wrapper = $('<div class=\"axs-cookie-control-wrapper\"></div>');\n\t\tvar textWrapper = $('<div class=\"axs-cookie-control-text-wrapper\"></div>');\n\n\t\tvar acceptButton = $('<button type=\"button\" class=\"axs-cookie-control-accept-button\"></button>');\n\t\tvar declineButton = $('<button type=\"button\" class=\"axs-cookie-control-decline-button\"></button>');\n\t\tvar buttons = $('<div class=\"axs-cookie-control-buttons\"></div>');\n\t\tbuttons.append(declineButton, acceptButton);\n\n\t\twrapper.append(textWrapper, buttons);\n\t\tthis.element.append(wrapper);\n\n\t\tvar widget = this;\n\t\t$(document.body).on('click', function(event){\n\t\t\twidget._onClick.apply(widget, [event]);\n\t\t});\n\t\t$(window).on('scroll', function(event){\n\t\t\twidget._onScroll.apply(widget, [event]);\n\t\t});\n\n\t\treturn {\n\t\t\twrapper: wrapper,\n\t\t\ttextWrapper: textWrapper,\n\t\t\tbuttons: buttons,\n\t\t\tacceptButton: acceptButton,\n\t\t\tdeclineButton: declineButton\n\t\t};\n\t},\n\t_setOptions: function( options, force) {\n\t\tforce = (force === true);\n\n\t\tvar widget = this;\n\n\t\t$.each( options, function( key, value ) {\n\t\t\tvar exists = widget.options.hasOwnProperty(key);\n\t\t\tvar beforeValue;\n\t\t\tif (exists){\n\t\t\t\tbeforeValue = widget.options[key];\n\t\t\t} else {\n\t\t\t\tbeforeValue = undefined;\n\t\t\t}\n\n\t\t\tif (force || !widget._equals(beforeValue, value)){\n\t\t\t\twidget._setOption( key, value );\n\n\t\t\t\twidget._trigger( \"changed\" + key, null, {\n\t\t\t\t\tbefore: beforeValue,\n\t\t\t\t\tafter: value,\n\t\t\t\t\tcreating: this._creating\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\tisAutoAcceptEnabled: function(){\n\t\treturn this.options.autoAccept === true || this.options.autoAccept.scroll === true || this.options.autoAccept.click === true;\n\t},\n\t_updateText: function(){\n\t\tvar textArray = undefined;\n\t\tif (this.isAutoAcceptEnabled()) {\n\t\t\ttextArray = this.options.messages.autoAccept;\n\t\t} else {\n\t\t\ttextArray = this.options.messages.normal;\n\t\t}\n\n\t\tvar text = undefined;\n\t\tif (this.options.analyticsOnly) {\n\t\t\ttext = textArray.analytics;\n\t\t} else {\n\t\t\ttext = textArray.generic;\n\t\t}\n\n\t\tthis._dom.textWrapper.empty();\n\t\tthis._dom.textWrapper.append(text);\n\t},\n\t_updateButtons: function(){\n\t\tvar acceptButton = this._dom.acceptButton;\n\t\tacceptButton.empty();\n\t\tacceptButton.append(this.options.messages.buttons.accept);\n\t\tacceptButton.toggle(this.options.buttons.accept);\n\n\t\tvar declineButton = this._dom.declineButton;\n\t\tdeclineButton.empty();\n\t\tdeclineButton.append(this.options.messages.buttons.decline);\n\t\tdeclineButton.toggle(this.options.buttons.decline);\n\t},\n\t_onScroll: function(){\n\t\tif ((this.options.autoAccept === true || this.options.autoAccept.scroll === true) && this.getStatus() == undefined) {\n\t\t\tthis.setStatus(true);\n\t\t}\n\t},\n\t_onClick: function(){\n\t\tif ((this.options.autoAccept === true || this.options.autoAccept.scroll === true) && this.getStatus() == undefined) {\n\t\t\tthis.setStatus(true);\n\t\t}\n\t},\n\t_autoAcceptChanged: function(){\n\t\tthis._updateText();\n\t},\n\t_analyticsOnlyChanged: function(){\n\t\tthis._updateText();\n\t},\n\t_messagesChanged: function(){\n\t\tthis._updateButtons();\n\t\tthis._updateText();\n\t},\n\t_buttonsChanged: function(){\n\t\tthis._updateButtons();\n\t},\n\t_positionChanged: function(event, data){\n\t\tif (data.after == \"top\") {\n\t\t\tthis.element.removeClass(\"bottom\");\n\t\t} else {\n\t\t\tthis.element.addClass(\"bottom\");\n\t\t}\n\t},\n\t_cookieChanged: function(event, values){\n\t\tvar beforeStatus = this.getStatus(values.before.name);\n\t\t$.removeCookie(values.before.name, {path: values.before.path});\n\n\t\tthis.setStatus(beforeStatus);\n\t},\n\t_setStatusIfChanged: function(status){\n\t\tvar currStatus = this.getStatus();\n\t\tif (status !== currStatus) {\n\t\t\tthis.setStatus(status);\n\t\t}\n\t},\n\t_setStatusImpl: function(status){\n\t\tif (status === undefined) {\n\t\t\t$.removeCookie(this.options.cookie.name, {\n\t\t\t\tpath: this.options.cookie.path\n\t\t\t});\n\t\t} else {\n\t\t\t$.cookie(this.options.cookie.name, status, {\n\t\t\t\texpires: this.options.cookie.expires,\n\t\t\t\tpath: this.options.cookie.path\n\t\t\t});\n\t\t}\n\t},\n\tsetStatus: function(status){\n\t\tif(status === null) {\n\t\t\tstatus = undefined; //Options don't want to pass undefined status\n\t\t}\n\n\t\tvar statusBefore = this.getStatus();\n\t\tthis._setStatusImpl(status);\n\t\tif (statusBefore != status) {\n\t\t\tthis._updateWidgetStatus(status, statusBefore);\n\t\t}\n\t},\n\tgetStatus: function(cookieName){\n\t\tif (cookieName === undefined) {\n\t\t\tcookieName = this.options.cookie.name;\n\t\t}\n\n\t\tvar status = $.cookie(cookieName);\n\n\t\tif (status === 'true') {\n\t\t\treturn true;\n\t\t} else if(status === 'false') {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn status;\n\t\t}\n\t},\n\t_updateWidgetStatus: function(status, oldStatus){\n\n\t\tif(status === oldStatus) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (status == undefined) {\n\t\t\tthis.element.removeClass(\"hidden\");\n\t\t\tthis._trigger(\n\t\t\t\t\"changedstatus\",\n\t\t\t\tnull,\n\t\t\t\t{\n\t\t\t\t\tbefore: oldStatus,\n\t\t\t\t\tafter: status,\n\t\t\t\t\tcreating: this._creating\n\t\t\t\t}\n\t\t\t);\n\t\t} else {\n\t\t\tthis.element.addClass(\"hidden\");\n\n\t\t\tif (status == true) {\n\t\t\t\tthis._trigger(\n\t\t\t\t\t\"changedstatus\",\n\t\t\t\t\tnull,\n\t\t\t\t\t{\n\t\t\t\t\t\tbefore: oldStatus,\n\t\t\t\t\t\tafter: status,\n\t\t\t\t\t\tcreating: this._creating\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis._trigger(\n\t\t\t\t\t\"changedstatus\",\n\t\t\t\t\tnull,\n\t\t\t\t\t{\n\t\t\t\t\t\tbefore: oldStatus,\n\t\t\t\t\t\tafter: status,\n\t\t\t\t\t\tcreating: this._creating\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t},\n\t_equals: function(x, y){\n\t\t//Copied from here.... http://stackoverflow.com/questions/1068834/object-comparison-in-javascript\n\t\tif ( x === y ) return true;\n\t\t// if both x and y are null or undefined and exactly the same\n\n\t\tif ( ! ( x instanceof Object ) || ! ( y instanceof Object ) ) return false;\n\t\t// if they are not strictly equal, they both need to be Objects\n\n\t\tif ( x.constructor !== y.constructor ) return false;\n\t\t// they must have the exact same prototype chain, the closest we can do is\n\t\t// test there constructor.\n\n\t\tfor ( var p in x ) {\n\t\t\tif ( ! x.hasOwnProperty( p ) ) continue;\n\t\t\t// other properties were tested using x.constructor === y.constructor\n\n\t\t\tif ( ! y.hasOwnProperty( p ) ) return false;\n\t\t\t// allows to compare x[ p ] and y[ p ] when set to undefined\n\n\t\t\tif ( x[ p ] === y[ p ] ) continue;\n\t\t\t// if they have the same strict value or identity then they are equal\n\n\t\t\tif ( typeof( x[ p ] ) !== \"object\" ) return false;\n\t\t\t// Numbers, Strings, Functions, Booleans must be strictly equal\n\n\t\t\tif ( ! this._equals( x[ p ],  y[ p ] ) ) return false;\n\t\t\t// Objects and Arrays must be tested recursively\n\t\t}\n\n\t\tfor ( p in y ) {\n\t\t\tif ( y.hasOwnProperty( p ) && ! x.hasOwnProperty( p ) ) return false;\n\t\t\t// allows x[ p ] to be set to undefined\n\t\t}\n\t\treturn true;\n\t},\n\t_destroy: function() {\n\t\tthis.element.empty();\n\n\t\tthis.element.removeClass('top bottom axs-cookie-control hidden');\n\t}\n});"],"sourceRoot":"/source/"}